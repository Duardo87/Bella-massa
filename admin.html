<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin ‚Ä¢ Bella Massa</title>

<style>
:root{
  --primary:#b11212;
  --primary-dark:#8b0000;
  --green:#25d366;
  --bg:#f4f4f4;
  --card:#fff;
  --text:#222;
  --radius:16px;
  --shadow:0 10px 28px rgba(0,0,0,.12);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

/* ================= HEADER ================= */
header{
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:100;
}

header a{
  color:#fff;
  text-decoration:none;
  font-weight:700;
}

/* ================= CONTAINER ================= */
.container{
  max-width:820px;
  margin:auto;
  padding:16px;
}

/* ================= CARD ================= */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:18px;
  box-shadow:var(--shadow);
  animation:fadeUp .35s ease;
}

h2{
  margin:0 0 12px;
}

/* ================= INPUTS ================= */
label{
  font-size:14px;
  margin-top:12px;
  display:block;
}

input,select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ddd;
  margin-top:6px;
  font-size:15px;
}

/* ================= BUTTONS ================= */
button{
  margin-top:14px;
  padding:12px;
  border-radius:12px;
  border:none;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}

button:hover{transform:scale(1.02)}

.btn{background:var(--green);color:#fff}
.btn-red{background:var(--primary);color:#fff}
.btn-outline{
  background:#fff;
  border:2px solid var(--primary);
  color:var(--primary);
}

/* ================= LISTAS ================= */
.list{
  margin-top:12px;
}

.list p{
  background:#f7f7f7;
  padding:10px 12px;
  border-radius:10px;
  margin:6px 0;
  font-weight:600;
}

/* ================= EXTRA ITEM ================= */
.extra-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:12px;
  background:#f7f7f7;
  border-radius:12px;
  margin-bottom:8px;
}

.extra-item small{opacity:.7}

/* ================= UTIL ================= */
.hidden{display:none}

/* ================= ANIMA√á√ïES ================= */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(14px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>

<header>
  <strong>üîê Admin ‚Ä¢ Bella Massa</strong>
  <a href="index.html">Ver site</a>
</header>

<div class="container">

<!-- LOGIN -->
<div id="login" class="card">
  <h2>Login</h2>
  <input id="email" placeholder="E-mail" value="admin@bellamassa.com">
  <input id="pass" type="password" placeholder="Senha" value="123456">
  <button class="btn" onclick="login()">Entrar</button>
</div>

<!-- ADMIN -->
<div id="admin" class="hidden">

<!-- DADOS -->
<div class="card">
  <h2>üè™ Dados da Loja</h2>
  <input id="storeName" placeholder="Nome da pizzaria">
  <input id="storePhone" placeholder="WhatsApp (somente n√∫meros)">
  <button class="btn-red" onclick="saveStore()">Salvar dados</button>
</div>

<!-- CATEGORIAS -->
<div class="card">
  <h2>üóÇ Categorias (estilo iFood)</h2>
  <input id="catName" placeholder="Nova categoria">
  <button class="btn-outline" onclick="addCategory()">Adicionar</button>
  <div id="catList" class="list"></div>
</div>

<!-- PRODUTOS -->
<div class="card">
  <h2>üçï Produtos</h2>

  <input id="prodName" placeholder="Nome do produto">
  <input id="prodDesc" placeholder="Descri√ß√£o curta">
  <input id="prodPrice" placeholder="Pre√ßo">
  <select id="prodCat"></select>
  <input type="file" id="prodImage" accept="image/*">

  <label>
    <input type="checkbox" id="prodBest"> ‚≠ê Marcar como mais pedido
  </label>

  <button class="btn" onclick="addProduct()">Adicionar produto</button>
  <div id="productList" class="list"></div>
</div>

<!-- ADICIONAIS -->
<div class="card">
  <h2>‚ûï Adicionais autom√°ticos</h2>

  <input id="extraName" placeholder="Nome do adicional">
  <input id="extraPrice" type="number" step="0.01" placeholder="Pre√ßo">

  <button class="btn-outline" onclick="addExtra()">Adicionar adicional</button>
  <div id="extraList" class="list"></div>
</div>

<!-- PROMO√á√ÉO -->
<div class="card">
  <h2>üî• Promo√ß√£o do Dia</h2>
  <input id="promoDesc" placeholder="Descri√ß√£o da promo√ß√£o">
  <input id="promoPrice" placeholder="Pre√ßo promocional">
  <input type="file" id="promoImage" accept="image/*">
  <input id="promoTime" placeholder="Dura√ß√£o em minutos">
  <button class="btn" onclick="savePromo()">Salvar promo√ß√£o</button>
</div>

<!-- BACKUP -->
<div class="card">
  <h2>üì¶ Backup</h2>
  <button class="btn-outline" onclick="exportJSON()">Exportar JSON</button>
  <input type="file" id="importFile" accept="application/json">
  <button class="btn-outline" onclick="importJSON()">Importar JSON</button>
</div>

<button class="btn-red" onclick="logout()">Sair</button>

</div>
</div>

<script>
const KEY="pizzaria-data";
const DB=()=>JSON.parse(localStorage.getItem(KEY)||"{}");
const SAVE=d=>localStorage.setItem(KEY,JSON.stringify(d));

const loginDiv=document.getElementById("login");
const admin=document.getElementById("admin");

function login(){
  loginDiv.classList.add("hidden");
  admin.classList.remove("hidden");
  load();
}

function logout(){location.reload()}

function load(){
  const d=DB();
  storeName.value=d.store?.name||"";
  storePhone.value=d.store?.phone||"";
  renderCategories();
  renderProducts();
  renderExtras();
}

/* ========= STORE ========= */
function saveStore(){
  const d=DB();
  d.store={name:storeName.value,phone:storePhone.value};
  SAVE(d);
  alert("Dados salvos com sucesso");
}

/* ========= CATEGORIAS ========= */
function addCategory(){
  const d=DB();
  d.categories=d.categories||[];
  d.categories.push(catName.value);
  SAVE(d);
  catName.value="";
  renderCategories();
}

function renderCategories(){
  const d=DB();
  catList.innerHTML="";
  prodCat.innerHTML="";
  (d.categories||[]).forEach(c=>{
    catList.innerHTML+=`<p>${c}</p>`;
    prodCat.innerHTML+=`<option>${c}</option>`;
  });
}

/* ========= PRODUTOS ========= */
function addProduct(){
  const d=DB();
  d.products=d.products||[];
  const r=new FileReader();
  r.onload=()=>{
    d.products.push({
      id:Date.now(),
      name:prodName.value,
      desc:prodDesc.value,
      price:+prodPrice.value,
      category:prodCat.value,
      image:r.result,
      best:prodBest.checked
    });
    SAVE(d);
    renderProducts();
  };
  r.readAsDataURL(prodImage.files[0]);
}

function renderProducts(){
  const d=DB();
  productList.innerHTML="";
  (d.products||[]).forEach(p=>{
    productList.innerHTML+=`<p>${p.name} ‚Äî R$ ${p.price.toFixed(2)}</p>`;
  });
}

/* ========= ADICIONAIS ========= */
function addExtra(){
  const d=DB();
  d.extras=d.extras||[];
  d.extras.push({
    id:Date.now(),
    name:extraName.value,
    price:+extraPrice.value,
    active:true
  });
  SAVE(d);
  extraName.value="";
  extraPrice.value="";
  renderExtras();
}

function renderExtras(){
  const d=DB();
  extraList.innerHTML="";
  (d.extras||[]).forEach(e=>{
    extraList.innerHTML+=`
      <div class="extra-item">
        <div>
          <strong>${e.name}</strong><br>
          <small>R$ ${e.price.toFixed(2)}</small>
        </div>
        <label>
          <input type="checkbox" ${e.active?"checked":""}
          onchange="toggleExtra(${e.id},this.checked)">
          Ativo
        </label>
      </div>
    `;
  });
}

function toggleExtra(id,status){
  const d=DB();
  const e=d.extras.find(x=>x.id===id);
  if(e){e.active=status;SAVE(d);}
}

/* ========= PROMO ========= */
function savePromo(){
  const d=DB();
  const r=new FileReader();
  r.onload=()=>{
    d.promo={
      active:true,
      description:promoDesc.value,
      price:+promoPrice.value,
      image:r.result,
      minutes:+promoTime.value,
      start:Date.now()
    };
    SAVE(d);
    alert("Promo√ß√£o salva");
  };
  r.readAsDataURL(promoImage.files[0]);
}

/* ========= BACKUP ========= */
function exportJSON(){
  const b=new Blob([JSON.stringify(DB(),null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(b);
  a.download="backup-bella-massa.json";
  a.click();
}

function importJSON(){
  const f=importFile.files[0];
  const r=new FileReader();
  r.onload=()=>{localStorage.setItem(KEY,r.result);location.reload()};
  r.readAsText(f);
}
</script>

</body>
</html>