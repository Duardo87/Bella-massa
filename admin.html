<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin ‚Ä¢ Bella Massa</title>

<style>
:root{
  --primary:#b11212;
  --primary-dark:#8b0000;
  --green:#25d366;
  --bg:#f4f4f4;
  --card:#fff;
  --text:#222;
  --radius:16px;
  --shadow:0 10px 28px rgba(0,0,0,.12);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

header{
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:100;
}

header a{color:#fff;text-decoration:none;font-weight:700}

.container{max-width:820px;margin:auto;padding:16px}

.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:18px;
  box-shadow:var(--shadow);
  animation:fadeUp .35s ease;
}

h2{margin:0 0 12px}

label{font-size:14px;margin-top:12px;display:block}

input,select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ddd;
  margin-top:6px;
  font-size:15px;
}

button{
  margin-top:14px;
  padding:12px;
  border-radius:12px;
  border:none;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}

button:hover{transform:scale(1.02)}

.btn{background:var(--green);color:#fff}
.btn-red{background:var(--primary);color:#fff}
.btn-outline{background:#fff;border:2px solid var(--primary);color:var(--primary)}

.list p{
  background:#f7f7f7;
  padding:10px 12px;
  border-radius:10px;
  margin:6px 0;
  font-weight:600;
}

.extra-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px;
  background:#f7f7f7;
  border-radius:12px;
  margin-bottom:8px;
}

.hidden{display:none}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(14px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>

<header>
  <strong>üîê Admin ‚Ä¢ Bella Massa</strong>
  <a href="index.html">Ver site</a>
</header>

<div class="container">

<div id="login" class="card">
  <h2>Login</h2>
  <input id="email" value="admin@bellamassa.com">
  <input id="pass" type="password" value="123456">
  <button class="btn" onclick="login()">Entrar</button>
</div>

<div id="admin" class="hidden">

<div class="card">
  <h2>üè™ Dados da Loja</h2>
  <input id="storeName">
  <input id="storePhone">
  <button class="btn-red" onclick="saveStore()">Salvar</button>
</div>

<div class="card">
  <h2>üóÇ Categorias</h2>
  <input id="catName">
  <button class="btn-outline" onclick="addCategory()">Adicionar</button>
  <div id="catList"></div>
</div>

<div class="card">
  <h2>üçï Produtos</h2>
  <input id="prodName">
  <input id="prodDesc">
  <input id="prodPrice">
  <select id="prodCat"></select>
  <input type="file" id="prodImage">
  <label><input type="checkbox" id="prodBest"> ‚≠ê Mais pedido</label>
  <button class="btn" onclick="addProduct()">Adicionar produto</button>
  <div id="productList"></div>
</div>

<div class="card">
  <h2>‚ûï Adicionais</h2>
  <input id="extraName">
  <input id="extraPrice" type="number" step="0.01">
  <button class="btn-outline" onclick="addExtra()">Adicionar</button>
  <div id="extraList"></div>
</div>

<div class="card">
  <h2>üî• Promo√ß√£o</h2>
  <input id="promoDesc">
  <input id="promoPrice">
  <input type="file" id="promoImage">
  <input id="promoTime">
  <button class="btn" onclick="savePromo()">Salvar promo</button>
</div>

<div class="card">
  <h2>üì¶ Backup</h2>
  <button class="btn-outline" onclick="exportJSON()">Exportar</button>
  <input type="file" id="importFile">
  <button class="btn-outline" onclick="importJSON()">Importar</button>
</div>

<button class="btn-red" onclick="logout()">Sair</button>
</div>
</div>

<script>
const KEY="pizzaria-data";
const DB=()=>JSON.parse(localStorage.getItem(KEY)||"{}");
const SAVE=d=>localStorage.setItem(KEY,JSON.stringify(d));

function login(){loginDiv.classList.add("hidden");admin.classList.remove("hidden");load()}
function logout(){location.reload()}

function load(){
  const d=DB();
  storeName.value=d.store?.name||"";
  storePhone.value=d.store?.phone||"";
  renderCategories();
  renderProducts();
  renderExtras();
}

function saveStore(){
  const d=DB();
  d.store={name:storeName.value,phone:storePhone.value};
  SAVE(d);alert("Salvo");
}

function addCategory(){
  if(!catName.value)return alert("Digite a categoria");
  const d=DB();
  d.categories=d.categories||[];
  d.categories.push(catName.value.trim());
  SAVE(d);catName.value="";renderCategories();
}

function renderCategories(){
  const d=DB();
  catList.innerHTML="";prodCat.innerHTML="";
  (d.categories||[]).forEach(c=>{
    catList.innerHTML+=`<p>${c}</p>`;
    prodCat.innerHTML+=`<option>${c}</option>`;
  });
}

function addProduct(){
  if(!prodName.value||!prodPrice.value||!prodCat.value||!prodImage.files[0])
    return alert("Preencha tudo");

  const d=DB();d.products=d.products||[];
  const r=new FileReader();
  r.onload=()=>{
    d.products.push({
      id:Date.now(),
      name:prodName.value,
      desc:prodDesc.value,
      price:+prodPrice.value,
      category:prodCat.value,
      image:r.result,
      best:prodBest.checked
    });
    SAVE(d);renderProducts();alert("Produto adicionado");
  };
  r.readAsDataURL(prodImage.files[0]);
}

function renderProducts(){
  const d=DB();productList.innerHTML="";
  (d.products||[]).forEach(p=>{
    productList.innerHTML+=`<p>${p.name} ‚Äî R$ ${p.price.toFixed(2)}</p>`;
  });
}

function addExtra(){
  const d=DB();d.extras=d.extras||[];
  d.extras.push({id:Date.now(),name:extraName.value,price:+extraPrice.value,active:true});
  SAVE(d);extraName.value="";extraPrice.value="";renderExtras();
}

function renderExtras(){
  const d=DB();extraList.innerHTML="";
  (d.extras||[]).forEach(e=>{
    extraList.innerHTML+=`
      <div class="extra-item">
        <strong>${e.name}</strong>
        <label><input type="checkbox" ${e.active?"checked":""}
        onchange="toggleExtra(${e.id},this.checked)">Ativo</label>
      </div>`;
  });
}

function toggleExtra(id,v){
  const d=DB();const e=d.extras.find(x=>x.id===id);
  if(e){e.active=v;SAVE(d);}
}

function savePromo(){
  const d=DB();
  const r=new FileReader();
  r.onload=()=>{
    d.promo={active:true,description:promoDesc.value,price:+promoPrice.value,image:r.result,minutes:+promoTime.value,start:Date.now()};
    SAVE(d);alert("Promo salva");
  };
  r.readAsDataURL(promoImage.files[0]);
}

function exportJSON(){
  const b=new Blob([JSON.stringify(DB(),null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(b);
  a.download="backup.json";a.click();
}

function importJSON(){
  const r=new FileReader();
  r.onload=()=>{localStorage.setItem(KEY,r.result);location.reload()};
  r.readAsText(importFile.files[0]);
}

const loginDiv=document.getElementById("login");
const admin=document.getElementById("admin");
</script>

</body>
</html>